<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Exercício 03 - Orion Bootcamp</title>
</head>

<body>
  <h1>Orion Bootcamp</h1>

  <!-- Exercício 1: Contagem de Vogais -->
  <div>
    <h2>Contagem de Vogais</h2>
    <h4>Digite uma palavra para descobrir quantas vogais ela possui.</h4>
    <label for="palavraInput">Palavra:</label>
    <input type="text" id="palavraInput" placeholder="Digite uma palavra"
      aria-label="Digite uma palavra para contagem de vogais">
    <button id="btnContarVogais">Contar Vogais</button>
    <p id="resultadoVogais"></p>
  </div>

  <!-- Exercício 2: Operações com Lista de Personalidades -->
  <div>
    <h2>Operações com Lista de Personalidades</h2>
    <h4>Digite o ID e escolha uma operação para realizar.</h4>
    <label for="inputId">ID:</label>
    <input type="text" id="inputId" placeholder="Digite o ID">
    <label for="operacao">Selecione uma operação:</label>
    <select id="operacao">
      <option value="1">1 - Obter Bio por ID</option>
      <option value="2">2 - Obter Nome por ID</option>
      <option value="3">3 - Deletar por ID</option>
      <option value="4">4 - Atualizar por ID</option>
      <option value="5">5 - Desfazer última exclusão</option>
    </select>
    <div id="updateFields" style="display: none;">
      <label for="inputName">Novo Nome (opcional):</label>
      <input type="text" id="inputName" placeholder="Nome">
      <label for="inputBio">Nova Bio (opcional):</label>
      <input type="text" id="inputBio" placeholder="Bio">
    </div>
    <button id="btnExecutar">Executar Operação</button>
    <p id="resultadoOperacao"></p>
  </div>

  <!-- Inclusão do JavaScript transpilado -->
  <script src="ex001.js"></script>
  <script src="ex002.js"></script>

  <!-- Scripts relacionados aos eventos do HTML -->
  <script>
    window.onload = function () {
      // Exercício 1: Contagem de Vogais
      document.getElementById('btnContarVogais').addEventListener('click', function () {
        // Pega o valor digitado no campo de input
        const palavra = document.getElementById('palavraInput').value;
        // Chama a função contarVogais (definida no arquivo transpilado ex001.js)
        const resultado = contarVogais(palavra);
        // Exibe o resultado no parágrafo abaixo do botão
        document.getElementById('resultadoVogais').innerText = `Quantidade de vogais em "${palavra}": ${resultado}`;
      });

      // Exercício 2: Operações com Lista de Personalidades
      const selectOperacao = document.getElementById('operacao');
      const updateFields = document.getElementById('updateFields');
      const inputId = document.getElementById('inputId');
      const resultadoOperacao = document.getElementById('resultadoOperacao');

      // Mostrar campos para atualização apenas se "Atualizar" for selecionado
      selectOperacao.addEventListener('change', function () {
        // Exibe os campos de atualização se a operação escolhida for "4 - Atualizar por ID"
        updateFields.style.display = selectOperacao.value === '4' ? 'block' : 'none';
      });

      // Executar operação selecionada
      document.getElementById('btnExecutar').addEventListener('click', function () {
        // Pega o valor da operação selecionada e do ID digitado
        const operacao = selectOperacao.value;
        const id = parseInt(inputId.value);
        let resultado = '';

        // Verifica se o ID é um número válido
        if (isNaN(id)) {
          resultadoOperacao.innerText = "Por favor, insira um ID válido.";
          return;
        }

        // Executa a operação baseada na seleção do usuário
        switch (operacao) {
          case '1': // Obter Bio por ID
            // Chama a função getBioByIdFuncional (do arquivo transpilado ex002.js)
            resultado = getBioByIdFuncional({ id }) || "ID não encontrado.";
            break;
          case '2': // Obter Nome por ID
            // Chama a função getNameByIdFuncional (do arquivo transpilado ex002.js)
            resultado = getNameByIdFuncional({ id }) || "ID não encontrado.";
            break;
          case '3': // Deletar por ID
            // Chama a função deleteByIdFuncional (do arquivo transpilado ex002.js)
            deleteByIdFuncional({ id });
            resultado = `Registro com ID ${id} deletado (se existia).`;
            break;
          case '4': // Atualizar por ID
            // Pega os valores dos campos de Nome e Bio para a atualização
            const newName = document.getElementById('inputName').value;
            const newBio = document.getElementById('inputBio').value;
            // Chama a função updateByIdFuncional (do arquivo transpilado ex002.js)
            updateByIdFuncional({ id, name: newName, bio: newBio });
            resultado = `Registro com ID ${id} atualizado (se existia).`;
            // Limpa os campos de Nome e Bio após a atualização
            document.getElementById('inputName').value = '';
            document.getElementById('inputBio').value = '';
            break;
          case '5': // Desfazer última exclusão
            // Chama a função desfazerUltimaExclusao (do arquivo transpilado ex002.js)
            desfazerUltimaExclusao();
            resultado = "Última exclusão desfeita (se possível).";
            break;
        }

        // Exibe o resultado da operação
        resultadoOperacao.innerText = resultado;
        // Limpa o campo de ID após a operação
        inputId.value = '';
      });
    };
  </script>
</body>

</html>