<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Exercício 03 - Orion Bootcamp</title>
</head>

<body>
  <h1>Orion Bootcamp</h1>

  <!-- Exercício 1: Contagem de Vogais -->
  <div>
    <h2>Contagem de Vogais</h2>
    <h4>Digite uma palavra para descobrir quantas vogais ela possui.</h4>
    <label for="palavraInput">Palavra:</label>
    <input type="text" id="palavraInput" placeholder="Digite uma palavra"
      aria-label="Digite uma palavra para contagem de vogais">
    <button id="btnContarVogais">Contar Vogais</button>
    <p id="resultadoVogais"></p>
  </div>

  <!-- Exercício 2: Operações com Lista de Personalidades -->
  <div>
    <h2>Operações com Lista de Personalidades</h2>
    <h4>Escolha o ID e a operação para realizar.</h4>
    <label for="selectId">ID:</label>
    <select id="selectId">
      <!-- IDs disponíveis serão adicionados dinamicamente -->
    </select>
    <label for="operacao">Selecione uma operação:</label>
    <select id="operacao">
      <option value="1">1 - Obter Bio por ID</option>
      <option value="2">2 - Obter Nome por ID</option>
      <option value="3">3 - Deletar por ID</option>
      <option value="4">4 - Atualizar por ID</option>
      <option value="5">5 - Desfazer última exclusão</option>
      <option value="6">6 - Desfazer última alteração</option>
    </select>
    <div id="updateFields" style="display: none;">
      <label for="inputName">Novo Nome (opcional):</label>
      <input type="text" id="inputName" placeholder="Nome">
      <label for="inputBio">Nova Bio (opcional):</label>
      <input type="text" id="inputBio" placeholder="Bio">
    </div>
    <button id="btnExecutar">Executar Operação</button>
    <p id="resultadoOperacao"></p>
  </div>

  <!-- Inclusão do JavaScript transpilado -->
  <script src="ex001.js"></script>
  <script src="ex002.js"></script>

  <!-- Scripts relacionados aos eventos do HTML -->
  <script>
    window.onload = function () {
      // Função para atualizar os IDs disponíveis no select
      function atualizarSelectIds() {
        const selectId = document.getElementById('selectId');
        selectId.innerHTML = ''; // Limpar opções existentes
        lista.forEach(item => {
          const option = document.createElement('option');
          option.value = item.id;
          option.text = item.id;
          selectId.appendChild(option);
        });
      }

      // Atualiza os IDs no carregamento da página
      atualizarSelectIds();

      // Exercício 1: Contagem de Vogais
      document.getElementById('btnContarVogais').addEventListener('click', function () {
        const palavra = document.getElementById('palavraInput').value;
        const resultado = contarVogais(palavra);
        document.getElementById('resultadoVogais').innerText = `Quantidade de vogais em "${palavra}": ${resultado}`;
      });

      // Exercício 2: Operações com Lista de Personalidades
      const selectOperacao = document.getElementById('operacao');
      const updateFields = document.getElementById('updateFields');
      const selectId = document.getElementById('selectId');
      const resultadoOperacao = document.getElementById('resultadoOperacao');

      // Mostrar campos para atualização apenas se "Atualizar" for selecionado
      selectOperacao.addEventListener('change', function () {
        updateFields.style.display = selectOperacao.value === '4' ? 'block' : 'none';
      });

      // Executar operação selecionada
      document.getElementById('btnExecutar').addEventListener('click', function () {
        const operacao = selectOperacao.value;
        const id = parseInt(selectId.value);
        let resultado = '';

        if (isNaN(id) && operacao !== '5' && operacao !== '6') {
          resultadoOperacao.innerText = "Por favor, insira um ID válido.";
          return;
        }

        switch (operacao) {
          case '1': // Obter Bio por ID
            resultado = getBioByIdFuncional({ id }) || "ID não encontrado.";
            break;
          case '2': // Obter Nome por ID
            resultado = getNameByIdFuncional({ id }) || "ID não encontrado.";
            break;
          case '3': // Deletar por ID
            deleteByIdFuncional({ id });
            resultado = "Deletado com sucesso!";
            atualizarSelectIds(); // Atualiza os IDs disponíveis
            break;
          case '4': // Atualizar por ID
            const newName = document.getElementById('inputName').value;
            const newBio = document.getElementById('inputBio').value;
            updateByIdFuncional({ id, name: newName, bio: newBio });
            resultado = "Atualizado com sucesso!";
            document.getElementById('inputName').value = '';
            document.getElementById('inputBio').value = '';
            break;
          case '5': // Desfazer última exclusão
            desfazerUltimaExclusao();
            resultado = "Última exclusão desfeita com sucesso!";
            atualizarSelectIds(); // Atualiza os IDs disponíveis
            break;
          case '6': // Desfazer última alteração
            desfazerUltimaAlteracao();
            resultado = "Última alteração desfeita com sucesso!";
            atualizarSelectIds(); // Atualiza os IDs disponíveis
            break;
        }

        resultadoOperacao.innerText = resultado;
      });
    };
  </script>
</body>

</html>